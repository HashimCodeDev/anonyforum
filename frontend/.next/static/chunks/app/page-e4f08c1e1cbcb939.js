(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9460:function(t,e,s){Promise.resolve().then(s.bind(s,6179)),Promise.resolve().then(s.bind(s,9056))},6179:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return l}});var o=s(1443),a=s(7954),n=s(5042);function l(){let[t,e]=(0,a.useState)(""),[s,l]=(0,a.useState)(!1),[c,i]=(0,a.useState)(""),r=async()=>{if(!t.trim()){i("Content cannot be empty.");return}try{var s;l(!0);let o=await n.Z.post("http://localhost:5000/api/posts/createPost",{title:"Anonymous",content:t.trim()});(null===(s=o.data)||void 0===s?void 0:s.message)&&(i(o.data.message),e(""))}catch(t){console.error("Error posting:",t),i("Failed to create post.")}finally{l(!1)}};return(0,o.jsxs)("section",{className:"mb-8 bg-white border border-[#9B9B9B] rounded-md px-6 py-4 shadow-sm",children:[(0,o.jsx)("div",{className:"w-full h-[40px] bg-[#E6E6E6] rounded-md mb-3"}),(0,o.jsx)("textarea",{className:"w-full border border-[#7A7A7A] rounded-md p-3 text-sm text-black resize-none h-28 placeholder:text-[#9E9E9E]",placeholder:"SHARE YOUR STATEMENT / CONCERNS / QUESTIONS",value:t,onChange:t=>e(t.target.value)}),(0,o.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,o.jsx)("button",{className:"text-xs bg-[#2563EB] text-white px-4 py-1 rounded-md font-medium disabled:opacity-50",onClick:r,disabled:s,children:s?"Posting...":"POST ANONYMOUSLY"}),(0,o.jsx)("button",{className:"text-lg bg-black text-white rounded-full w-8 h-8 flex items-center justify-center",children:"+"})]}),c&&(0,o.jsx)("p",{className:"text-xs mt-2 text-[#2563EB]",children:c})]})}},9056:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return l}});var o=s(1443),a=s(7954),n=s(5042);function l(){let[t,e]=(0,a.useState)([]),[s,l]=(0,a.useState)(!0),c=()=>{n.Z.get("http://localhost:5000/api/posts/getAllPosts").then(t=>{e(t.data)}).catch(t=>{console.error("Failed to fetch posts:",t)}).finally(()=>{l(!1)})};(0,a.useEffect)(()=>{c();let t=setInterval(c,2e4);return()=>clearInterval(t)},[]);let i=async(t,e,s,o)=>{let a="upvote"===o?"votedPosts":"downvotedPosts",l="upvote"===o?"downvotedPosts":"votedPosts",i=JSON.parse(localStorage.getItem(a)||"[]"),r=JSON.parse(localStorage.getItem(l)||"[]"),d=i.includes(s),m=r.includes(s);try{d?(await n.Z.put("http://localhost:5000/api/posts/".concat(o,"Update/").concat(s)),localStorage.setItem(a,JSON.stringify(i.filter(t=>t!==s))),console.log("".concat(o," removed"))):(m&&(await n.Z.put("http://localhost:5000/api/posts/".concat("upvote"===o?"downvote":"upvote","Update/").concat(s)),localStorage.setItem(l,JSON.stringify(r.filter(t=>t!==s)))),await n.Z.put("http://localhost:5000/api/posts/".concat(o,"Post/").concat(s)),localStorage.setItem(a,JSON.stringify([...i,s])),console.log("".concat(o," added"))),c()}catch(t){console.error("Failed to toggle ".concat(o,":"),t)}};return(0,o.jsxs)("section",{className:"pt-2",children:[(0,o.jsx)("h2",{className:"text-xs font-semibold mb-4 uppercase tracking-wide text-[#1A1A1A] bg-[#D7EAFE] inline-block px-3 py-1 rounded-md",children:"OPEN BOARD"}),s&&(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Loading posts..."}),t.map(t=>(0,o.jsxs)("div",{className:"mb-8 bg-white border border-[#9B9B9B] rounded-md p-4",children:[(0,o.jsx)("p",{className:"text-xs text-[#7A7A7A] mb-1",children:new Date(t.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,o.jsx)("div",{className:"border border-[#C5C5C5] rounded-md p-3 mb-2",children:(0,o.jsx)("p",{className:"text-base text-black font-bold uppercase",children:t.title})}),(0,o.jsx)("span",{className:"inline-block text-xs bg-[#D7EAFE] text-[#2563EB] px-3 py-[2px] rounded-full font-medium",children:t._id.slice(-2)}),(0,o.jsx)("p",{className:"mt-2 text-sm text-[#2A2A2A] leading-snug",children:t.content}),(0,o.jsxs)("div",{className:"mt-2 flex items-center space-x-3 justify-start",children:[(0,o.jsxs)("button",{className:"text-xs bg-[#2563EB] text-white px-3 py-1 rounded-md font-medium",onClick:()=>i(t.upvotes,t.downvotes,t._id,"upvote"),children:[(0,o.jsx)("img",{src:"/upvote-icon.svg",alt:"Upvote",className:"inline-block mr-1",width:16,height:16}),"Upvote"]}),(0,o.jsxs)("p",{className:"text-xs text-[#7A7A7A] self-center",children:["Upvotes ",t.upvotes]}),(0,o.jsxs)("button",{className:"text-xs bg-red-500 text-white px-3 py-1 rounded-md font-medium",onClick:()=>i(t.upvotes,t.downvotes,t._id,"downvote"),children:[(0,o.jsx)("img",{src:"/downvote-icon.svg",alt:"Downvote",className:"inline-block mr-1",width:16,height:16}),"Downvote"]}),(0,o.jsx)("p",{className:"text-xs text-[#7A7A7A] self-center"})]})]},t._id))]})}}},function(t){t.O(0,[42,878,323,744],function(){return t(t.s=9460)}),_N_E=t.O()}]);