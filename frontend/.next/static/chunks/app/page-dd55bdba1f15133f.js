(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9460:function(e,t,s){Promise.resolve().then(s.bind(s,6179)),Promise.resolve().then(s.bind(s,9056))},6179:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var o=s(1443),n=s(7954),a=s(5042),c=s(5750);function l(){let[e,t]=(0,n.useState)(""),[s,l]=(0,n.useState)(!1),[r,i]=(0,n.useState)(""),d=c.env.BACKEND_URL||"https://anonyforum.onrender.com",m=async()=>{if(!e.trim()){i("Content cannot be empty.");return}try{var s;l(!0);let o=await a.Z.post("".concat(d,"/api/posts/createPost"),{title:"Anonymous",content:e.trim()});(null===(s=o.data)||void 0===s?void 0:s.message)&&(i(o.data.message),t(""))}catch(e){console.error("Error posting:",e),i("Failed to create post.")}finally{l(!1)}};return(0,o.jsxs)("section",{className:"mb-8 bg-white border border-[#9B9B9B] rounded-md px-6 py-4 shadow-sm",children:[(0,o.jsx)("div",{className:"w-full h-[40px] bg-[#E6E6E6] rounded-md mb-3"}),(0,o.jsx)("textarea",{className:"w-full border border-[#7A7A7A] rounded-md p-3 text-sm text-black resize-none h-28 placeholder:text-[#9E9E9E]",placeholder:"SHARE YOUR STATEMENT / CONCERNS / QUESTIONS",value:e,onChange:e=>t(e.target.value)}),(0,o.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,o.jsx)("button",{className:"text-xs bg-[#2563EB] text-white px-4 py-1 rounded-md font-medium disabled:opacity-50",onClick:m,disabled:s,children:s?"Posting...":"POST ANONYMOUSLY"}),(0,o.jsx)("button",{className:"text-lg bg-black text-white rounded-full w-8 h-8 flex items-center justify-center",children:"+"})]}),r&&(0,o.jsx)("p",{className:"text-xs mt-2 text-[#2563EB]",children:r})]})}},9056:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var o=s(1443),n=s(7954),a=s(5042),c=s(5750);function l(){let[e,t]=(0,n.useState)([]),[s,l]=(0,n.useState)(!0),r=c.env.BACKEND_URL||"http://localhost:5000",i=()=>{a.Z.get("".concat(r,"/api/posts/getAllPosts")).then(e=>{t(e.data)}).catch(e=>{console.error("Failed to fetch posts:",e)}).finally(()=>{l(!1)})};(0,n.useEffect)(()=>{i();let e=setInterval(i,2e4);return()=>clearInterval(e)},[]);let d=async(e,t,s,o)=>{let n="upvote"===o?"votedPosts":"downvotedPosts",c="upvote"===o?"downvotedPosts":"votedPosts",l=JSON.parse(localStorage.getItem(n)||"[]"),d=JSON.parse(localStorage.getItem(c)||"[]"),m=l.includes(s),u=d.includes(s);try{m?(await a.Z.put("".concat(r,"/api/posts/").concat(o,"Update/").concat(s)),localStorage.setItem(n,JSON.stringify(l.filter(e=>e!==s))),console.log("".concat(o," removed"))):(u&&(await a.Z.put("".concat(r,"/api/posts/").concat("upvote"===o?"downvote":"upvote","Update/").concat(s)),localStorage.setItem(c,JSON.stringify(d.filter(e=>e!==s)))),await a.Z.put("".concat(r,"/api/posts/").concat(o,"Post/").concat(s)),localStorage.setItem(n,JSON.stringify([...l,s])),console.log("".concat(o," added"))),i()}catch(e){console.error("Failed to toggle ".concat(o,":"),e)}};return(0,o.jsxs)("section",{className:"pt-2",children:[(0,o.jsx)("h2",{className:"text-xs font-semibold mb-4 uppercase tracking-wide text-[#1A1A1A] bg-[#D7EAFE] inline-block px-3 py-1 rounded-md",children:"OPEN BOARD"}),s&&(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Loading posts..."}),e.map(e=>(0,o.jsxs)("div",{className:"mb-8 bg-white border border-[#9B9B9B] rounded-md p-4",children:[(0,o.jsx)("p",{className:"text-xs text-[#7A7A7A] mb-1",children:new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,o.jsx)("div",{className:"border border-[#C5C5C5] rounded-md p-3 mb-2",children:(0,o.jsx)("p",{className:"text-base text-black font-bold uppercase",children:e.title})}),(0,o.jsx)("span",{className:"inline-block text-xs bg-[#D7EAFE] text-[#2563EB] px-3 py-[2px] rounded-full font-medium",children:e._id.slice(-2)}),(0,o.jsx)("p",{className:"mt-2 text-sm text-[#2A2A2A] leading-snug",children:e.content}),(0,o.jsxs)("div",{className:"mt-2 flex items-center space-x-3 justify-start",children:[(0,o.jsxs)("button",{className:"text-xs bg-[#2563EB] text-white px-3 py-1 rounded-md font-medium",onClick:()=>d(e.upvotes,e.downvotes,e._id,"upvote"),children:[(0,o.jsx)("img",{src:"/upvote-icon.svg",alt:"Upvote",className:"inline-block mr-1",width:16,height:16}),"Upvote"]}),(0,o.jsxs)("p",{className:"text-xs text-[#7A7A7A] self-center",children:["Upvotes ",e.upvotes]}),(0,o.jsxs)("button",{className:"text-xs bg-red-500 text-white px-3 py-1 rounded-md font-medium",onClick:()=>d(e.upvotes,e.downvotes,e._id,"downvote"),children:[(0,o.jsx)("img",{src:"/downvote-icon.svg",alt:"Downvote",className:"inline-block mr-1",width:16,height:16}),"Downvote"]}),(0,o.jsx)("p",{className:"text-xs text-[#7A7A7A] self-center"})]})]},e._id))]})}}},function(e){e.O(0,[42,878,323,744],function(){return e(e.s=9460)}),_N_E=e.O()}]);